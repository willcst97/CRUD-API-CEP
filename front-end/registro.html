<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/registro.css">
    <title>Registro</title>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/login">Login</a></li>
                <li><a href="/register">Registro</a></li>
            </ul>
        </nav>
    </header>
    <h1>Página de registro</h1>
    <div class="container">

        <form id="registration-form" method="POST" action="/register">
            <div>
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div>
                <label for="password">Senha:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div>
                <label for="confirm-password">Confirme a senha:</label>
                <input type="password" id="confirm-password" name="confirm-password" required>
            </div>
            <div>
                <label for="cep">CEP:</label>
                <input type="text" id="cep" name="cep" required>
            </div>
            <div>
                <label for="rua">Logradouro:</label>
                <input type="text" id="rua" name="rua" required>
            </div>
            <div>
                <label for="num">Número:</label>
                <input type="text" id="num" name="num" required>
            </div>
            <div>
                <label for="bairro">Bairro:</label>
                <input type="text" id="bairro" name="bairro" required>
            </div>
            <div>
                <label for="cidade">Cidade:</label>
                <input type="text" id="cidade" name="cidade" required>
            </div>
            <div>
                <label for="uf">UF:</label>
                <input type="text" id="uf" name="uf" required>
            </div>
            <div class="button">
                <button type="submit">Registrar</button>
            </div>
        </form>
    </div>
    <script src="/js/validacao.js"> </script>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>

$(document).ready(function(){
    $("input[name=cep]").blur(function(){
        var cep = $(this).val().replace(/[^0-9]/, '');
        if(cep){
            var url = 'https://viacep.com.br/ws/'+cep+'/json/';
            $.ajax({
                    url: url,
                    dataType: 'jsonp',
                    crossDomain: true,
                    contentType: "application/json",
                    success : function(json){
                        if(json.logradouro){
                            $("input[name=rua]").val(json.logradouro);
                            $("input[name=bairro]").val(json.bairro);
                            $("input[name=cidade]").val(json.localidade);
                            $("input[name=uf]").val(json.estado);

                            $('#num').focus();
                        }
                    }
            });
        }                   
    }); 
});

</script>

</html>
